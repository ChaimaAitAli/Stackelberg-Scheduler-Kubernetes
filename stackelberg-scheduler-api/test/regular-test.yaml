# Scenario 3: Production-Typical Allocation
# Web apps typically get more resources, ML training gets compute-heavy resources
# Data processing gets balanced resources

apiVersion: apps/v1
kind: Deployment
metadata:
  name: regular-web-app-typical
  namespace: default
  labels:
    tenant: web-app
    app: web-application
    scenario: production-typical
spec:
  replicas: 3  # Higher replicas for web apps (availability)
  selector:
    matchLabels:
      tenant: web-app
      app: web-application
  template:
    metadata:
      labels:
        tenant: web-app
        app: web-application
    spec:
      schedulerName: default-scheduler
      tolerations:
      - key: "mocklet.io/provider"
        operator: "Equal"
        value: "mock"
        effect: "NoSchedule"
      containers:
        - name: web-app
          image: nginx:alpine
          ports:
            - containerPort: 80
          resources:
            requests:
              cpu: "15000m"      # 15 CPU per replica (moderate)
              memory: "30Gi"     # 30 GB per replica (web apps need memory)
            limits:
              cpu: "15000m"
              memory: "30Gi"

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: regular-data-processing-typical
  namespace: default
  labels:
    tenant: data-processing
    app: data-processor
    scenario: production-typical
spec:
  replicas: 2  # Moderate replicas for data processing
  selector:
    matchLabels:
      tenant: data-processing
      app: data-processor
  template:
    metadata:
      labels:
        tenant: data-processing
        app: data-processor
    spec:
      schedulerName: default-scheduler
      tolerations:
      - key: "mocklet.io/provider"
        operator: "Equal"
        value: "mock"
        effect: "NoSchedule"
      containers:
        - name: data-processor
          image: nginx:alpine
          command: ["sleep", "3600"]
          ports:
            - containerPort: 8080
          resources:
            requests:
              cpu: "10000m"      # 10 CPU per replica (CPU-intensive)
              memory: "40Gi"     # 40 GB per replica (data needs memory)
            limits:
              cpu: "10000m"
              memory: "40Gi"

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: regular-ml-training-typical
  namespace: default
  labels:
    tenant: ml-training
    app: ml-trainer
    scenario: production-typical
spec:
  replicas: 1  # Single replica for ML training (typical)
  selector:
    matchLabels:
      tenant: ml-training
      app: ml-trainer
  template:
    metadata:
      labels:
        tenant: ml-training
        app: ml-trainer
    spec:
      schedulerName: default-scheduler
      tolerations:
      - key: "mocklet.io/provider"
        operator: "Equal"
        value: "mock"
        effect: "NoSchedule"
      containers:
        - name: ml-trainer
          image: nginx:alpine
          command: ["sleep", "3600"]
          ports:
            - containerPort: 9000
          resources:
            requests:
              cpu: "25000m"      # 25 CPU (ML needs heavy compute)
              memory: "80Gi"     # 80 GB (ML needs lots of memory)
            limits:
              cpu: "25000m"
              memory: "80Gi"